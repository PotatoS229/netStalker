Доброе утро! Поздравляю с началом второго дня занятий по архитектуре x86-64 и NASM! Продолжим разбираться с этой интересной темой.

## Копирование с помощью `mov`

Команда `mov` — одна из основных инструкций в ассемблере. Она выполняет копирование данных между регистрами, памятью и непосредственными значениями.

Синтаксис:
```nasm
mov куда_копируем, откуда_копируем
```

## Проверка результата через код возврата в Linux

**Вопрос:** Зачем нам нужно это знать?

**Ответ:** Данная проверка позволяет узнать, как завершилась программа, что особенно важно для скриптов и отладки.

Пример программы:
```nasm
global _start

section .text
_start:
    mov rdi, 17    ; статус выхода: 17
    mov rax, 60    ; системный вызов exit (номер 60)
    syscall
```

Разберем код подробно:

1. **`global _start`** — объявляем метку `_start` глобальной, чтобы компоновщик знал, с чего начинается программа
2. **`section .text`** — создаем секцию для исполняемого кода
3. **`_start:`** — точка входа в программу
4. **`mov rdi, 17`** — помещаем в регистр `rdi` код возврата (17)
5. **`mov rax, 60`** — помещаем в регистр `rax` номер системного вызова (60 — exit)
6. **`syscall`** — выполняем системный вызов

Для проверки кода возврата в Linux выполните в консоли:
```bash
echo $?
```

**Важно:** В Linux x86-64 для передачи кода возврата используется регистр `rdi`. После завершения программы этот код можно прочитать с помощью команды `echo $?`.

## Размерность операндов

Команда `mov` требует, чтобы операнды были одинаковой разрядности.

Примеры корректного использования:
```nasm
mov al, bl     ; оба 8-битные
mov ax, bx     ; оба 16-битные  
mov eax, ebx   ; оба 32-битные
mov rax, rbx   ; оба 64-битные
mov ecx, 525   ; допустимо: 32-битный регистр, 525 помещается в 32 бита
mov eax, ecx   ; оба регистра 32-битные
```

## Расширение значения: movsx, movzx, movsxd

Если требуется перенести данные из меньшего регистра в больший с сохранением знака или без него, используются специальные инструкции:

- **`movsx`** — копирует с расширением знака (sign-extend)
- **`movzx`** — копирует с добавлением нулей (zero-extend)  
- **`movsxd`** — расширяет 32-битное значение до 64 бит, включая знак

Примеры:
```nasm
mov al, -5
movsx rsi, al      ; rsi = -5 (с учётом знака, старшие биты — единицы)

mov cl, 20
movzx rdx, cl      ; rdx = 20 (расширение нулями, старшие биты — нули)

mov edi, -1
movsxd rax, edi    ; расширение 32-битного значения до 64 бит
```